
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../language_spec/">
      
      
        <link rel="next" href="../error_handling_guide/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Interpreter Architecture - Harneet Language</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#harneet-interpreter-architecture-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Harneet Language" class="md-header__button md-logo" aria-label="Harneet Language" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Harneet Language
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Interpreter Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Harneet Language" class="md-nav__button md-logo" aria-label="Harneet Language" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Harneet Language
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../language_spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Language Specification
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Interpreter Architecture
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Interpreter Architecture
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#component-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Component Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-lexer-lexergo" class="md-nav__link">
    <span class="md-ellipsis">
      1. Lexer (lexer.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-parser-parsergo" class="md-nav__link">
    <span class="md-ellipsis">
      2. Parser (parser.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-abstract-syntax-tree-ast-astgo" class="md-nav__link">
    <span class="md-ellipsis">
      3. Abstract Syntax Tree (AST) - ast.go
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Abstract Syntax Tree (AST) - ast.go">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-are-ast-trees" class="md-nav__link">
    <span class="md-ellipsis">
      What are AST trees?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-do-we-need-ast-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Why do we need AST trees?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-evaluator-evaluatorgo" class="md-nav__link">
    <span class="md-ellipsis">
      4. Evaluator (evaluator.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-standard-library-stdlibgo" class="md-nav__link">
    <span class="md-ellipsis">
      5. Standard Library (stdlib.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-stack-trace-system-error-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      6. Stack Trace System (Error Debugging)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Stack Trace System (Error Debugging)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-components" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-position-information-parserastgo" class="md-nav__link">
    <span class="md-ellipsis">
      A. Position Information (parser/ast.go)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-stack-frame-tracking-evaluatorgo" class="md-nav__link">
    <span class="md-ellipsis">
      B. Stack Frame Tracking (evaluator.go)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-enhanced-error-objects" class="md-nav__link">
    <span class="md-ellipsis">
      C. Enhanced Error Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-environment-call-stack-management" class="md-nav__link">
    <span class="md-ellipsis">
      D. Environment Call Stack Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-position-tracking-during-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Position Tracking During Parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-call-stack-management-during-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Call Stack Management During Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-error-creation-with-stack-traces" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Error Creation with Stack Traces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#position-flow-example" class="md-nav__link">
    <span class="md-ellipsis">
      Position Flow Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-implementation-details" class="md-nav__link">
    <span class="md-ellipsis">
      Key Implementation Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Implementation Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-filename-propagation" class="md-nav__link">
    <span class="md-ellipsis">
      A. Filename Propagation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-smart-position-updates" class="md-nav__link">
    <span class="md-ellipsis">
      B. Smart Position Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-function-call-tracking" class="md-nav__link">
    <span class="md-ellipsis">
      C. Function Call Tracking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-types-with-stack-traces" class="md-nav__link">
    <span class="md-ellipsis">
      Error Types with Stack Traces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Types with Stack Traces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-arithmetic-errors" class="md-nav__link">
    <span class="md-ellipsis">
      1. Arithmetic Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-identifier-errors" class="md-nav__link">
    <span class="md-ellipsis">
      2. Identifier Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-function-call-errors" class="md-nav__link">
    <span class="md-ellipsis">
      3. Function Call Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-type-conversion-errors" class="md-nav__link">
    <span class="md-ellipsis">
      4. Type Conversion Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-parser-errors-syntax-errors" class="md-nav__link">
    <span class="md-ellipsis">
      5. Parser Errors (Syntax Errors)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-for-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits for Debugging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benefits for Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#immediate-error-location" class="md-nav__link">
    <span class="md-ellipsis">
      Immediate Error Location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-call-context" class="md-nav__link">
    <span class="md-ellipsis">
      Function Call Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-context" class="md-nav__link">
    <span class="md-ellipsis">
      File Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parser-error-diagnostics" class="md-nav__link">
    <span class="md-ellipsis">
      Parser Error Diagnostics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-files" class="md-nav__link">
    <span class="md-ellipsis">
      Test Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Test Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-output-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Test Output Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-flow-between-components" class="md-nav__link">
    <span class="md-ellipsis">
      Control Flow Between Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Flow Between Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-lexical-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Lexical Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-syntax-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Syntax Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Evaluation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-flow-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-import-and-resolution-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Module Import and Resolution Flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-and-scoping" class="md-nav__link">
    <span class="md-ellipsis">
      Environment and Scoping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-new-standard-library-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New Standard Library Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding New Standard Library Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-define-module-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Define Module Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-register-module" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Register Module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-use-in-harneet-code" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Use in Harneet Code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-standard-library-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Standard Library Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Standard Library Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complex-object-types-and-state-management" class="md-nav__link">
    <span class="md-ellipsis">
      Complex Object Types and State Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Complex Object Types and State Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timer-and-ticker-object-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Timer and Ticker Object Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-state-management" class="md-nav__link">
    <span class="md-ellipsis">
      Global State Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-system-object-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Cross-System Object Conversion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timezone-and-locale-management" class="md-nav__link">
    <span class="md-ellipsis">
      Timezone and Locale Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module-registration-and-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      Module Registration and Discovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-infrastructure-for-complex-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Infrastructure for Complex Objects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../error_handling_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Handling Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    General
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            General
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/data_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/variable_declaration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variable Declaration & Assignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/scoping_variable_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scoping and Variable Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/comments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Comments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/import_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/operators_and_expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operators and Expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/unicode_support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unicode Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/arrays/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/control_flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/block_structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/keywords_identifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Keywords and Identifiers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../error_handling_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Handling System
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Functions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions/arrow_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arrow Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions/advanced_features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Features
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Standard Library
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Standard Library
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/fmt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    fmt
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    math
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/strings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    strings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/arrays/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/datetime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datetime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/os/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    os
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/path/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    path
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/log/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    log
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    json
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stdlib/assert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    assert
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_system_safety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Type System & Safety
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../comprehensive_examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Comprehensive Language Examples
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#component-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Component Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-lexer-lexergo" class="md-nav__link">
    <span class="md-ellipsis">
      1. Lexer (lexer.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-parser-parsergo" class="md-nav__link">
    <span class="md-ellipsis">
      2. Parser (parser.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-abstract-syntax-tree-ast-astgo" class="md-nav__link">
    <span class="md-ellipsis">
      3. Abstract Syntax Tree (AST) - ast.go
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Abstract Syntax Tree (AST) - ast.go">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-are-ast-trees" class="md-nav__link">
    <span class="md-ellipsis">
      What are AST trees?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-do-we-need-ast-trees" class="md-nav__link">
    <span class="md-ellipsis">
      Why do we need AST trees?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-evaluator-evaluatorgo" class="md-nav__link">
    <span class="md-ellipsis">
      4. Evaluator (evaluator.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-standard-library-stdlibgo" class="md-nav__link">
    <span class="md-ellipsis">
      5. Standard Library (stdlib.go)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-stack-trace-system-error-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      6. Stack Trace System (Error Debugging)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Stack Trace System (Error Debugging)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-components" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-position-information-parserastgo" class="md-nav__link">
    <span class="md-ellipsis">
      A. Position Information (parser/ast.go)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-stack-frame-tracking-evaluatorgo" class="md-nav__link">
    <span class="md-ellipsis">
      B. Stack Frame Tracking (evaluator.go)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-enhanced-error-objects" class="md-nav__link">
    <span class="md-ellipsis">
      C. Enhanced Error Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-environment-call-stack-management" class="md-nav__link">
    <span class="md-ellipsis">
      D. Environment Call Stack Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-position-tracking-during-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Position Tracking During Parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-call-stack-management-during-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Call Stack Management During Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-error-creation-with-stack-traces" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Error Creation with Stack Traces
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#position-flow-example" class="md-nav__link">
    <span class="md-ellipsis">
      Position Flow Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-implementation-details" class="md-nav__link">
    <span class="md-ellipsis">
      Key Implementation Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Implementation Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-filename-propagation" class="md-nav__link">
    <span class="md-ellipsis">
      A. Filename Propagation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-smart-position-updates" class="md-nav__link">
    <span class="md-ellipsis">
      B. Smart Position Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-function-call-tracking" class="md-nav__link">
    <span class="md-ellipsis">
      C. Function Call Tracking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-types-with-stack-traces" class="md-nav__link">
    <span class="md-ellipsis">
      Error Types with Stack Traces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Types with Stack Traces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-arithmetic-errors" class="md-nav__link">
    <span class="md-ellipsis">
      1. Arithmetic Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-identifier-errors" class="md-nav__link">
    <span class="md-ellipsis">
      2. Identifier Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-function-call-errors" class="md-nav__link">
    <span class="md-ellipsis">
      3. Function Call Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-type-conversion-errors" class="md-nav__link">
    <span class="md-ellipsis">
      4. Type Conversion Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-parser-errors-syntax-errors" class="md-nav__link">
    <span class="md-ellipsis">
      5. Parser Errors (Syntax Errors)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-for-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits for Debugging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benefits for Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#immediate-error-location" class="md-nav__link">
    <span class="md-ellipsis">
      Immediate Error Location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-call-context" class="md-nav__link">
    <span class="md-ellipsis">
      Function Call Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-context" class="md-nav__link">
    <span class="md-ellipsis">
      File Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parser-error-diagnostics" class="md-nav__link">
    <span class="md-ellipsis">
      Parser Error Diagnostics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-files" class="md-nav__link">
    <span class="md-ellipsis">
      Test Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Test Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-output-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Test Output Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-flow-between-components" class="md-nav__link">
    <span class="md-ellipsis">
      Control Flow Between Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Flow Between Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-lexical-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Lexical Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-syntax-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Syntax Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Evaluation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-flow-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-import-and-resolution-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Module Import and Resolution Flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-and-scoping" class="md-nav__link">
    <span class="md-ellipsis">
      Environment and Scoping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-new-standard-library-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New Standard Library Modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding New Standard Library Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-define-module-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Define Module Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-register-module" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Register Module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-use-in-harneet-code" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Use in Harneet Code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-standard-library-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Standard Library Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Standard Library Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complex-object-types-and-state-management" class="md-nav__link">
    <span class="md-ellipsis">
      Complex Object Types and State Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Complex Object Types and State Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timer-and-ticker-object-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Timer and Ticker Object Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-state-management" class="md-nav__link">
    <span class="md-ellipsis">
      Global State Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-system-object-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Cross-System Object Conversion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timezone-and-locale-management" class="md-nav__link">
    <span class="md-ellipsis">
      Timezone and Locale Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module-registration-and-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      Module Registration and Discovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-infrastructure-for-complex-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Infrastructure for Complex Objects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="harneet-interpreter-architecture-guide">Harneet Interpreter Architecture Guide</h1>
<p>This document explains the core components of the Harneet interpreter and how they work together to execute your code.</p>
<h2 id="component-overview">Component Overview</h2>
<p>The Harneet interpreter follows a traditional pipeline architecture with six main stages:</p>
<p><strong>Source Code → Lexer → Parser → AST → Evaluator (with Standard Library &amp; Stack Trace System) → Result</strong></p>
<h2 id="1-lexer-lexergo">1. Lexer (<code>lexer.go</code>)</h2>
<p><strong>What it does</strong>: The lexer (also called a tokenizer) is the first stage that reads your raw source code character by character and converts it into meaningful tokens.</p>
<p><strong>Key responsibilities</strong>:
- Reads source code as a string of characters
- Identifies keywords (<code>var</code>, <code>int</code>, <code>string</code>, <code>if</code>, <code>for</code>, <code>and</code>, <code>or</code>, <code>import</code>, etc.)
- Recognizes operators (<code>+</code>, <code>-</code>, <code>==</code>, <code>!=</code>, etc.)
- Extracts literals (numbers, strings)
- Handles whitespace and comments
- Reports the position of each token for error reporting</p>
<p><strong>Example transformation</strong>:</p>
<pre><code class="language-harneet">Input:  &quot;var x int = 42&quot;
Output: [VAR, IDENT(&quot;x&quot;), INT, ASSIGN, INTEGER(42)]
</code></pre>
<p><strong>Note</strong>: IDENT stands for "Identifier" - a user-defined name in your code. <code>IDENT("x")</code> means the lexer found an identifier called "x". Identifiers are names you create for variables, functions, or types, as opposed to reserved keywords like <code>var</code>, <code>if</code>, <code>for</code>.</p>
<p><strong>Key functions</strong>:
- <code>NextToken()</code> - Returns the next token from the input stream
- Character classification functions to identify token types</p>
<h2 id="2-parser-parsergo">2. Parser (<code>parser.go</code>)</h2>
<p><strong>What it does</strong>: The parser takes the stream of tokens from the lexer and organizes them into a structured tree representation (AST) based on the language's grammar rules.</p>
<p><strong>Key responsibilities</strong>:
- Reads tokens in sequence from the lexer
- Applies grammar rules to understand syntax structure
- Handles operator precedence (e.g., <code>*</code> before <code>+</code>)
- Builds the Abstract Syntax Tree (AST)
- Reports syntax errors when code doesn't follow grammar rules
- Uses recursive descent parsing with Pratt parsing for expressions</p>
<p><strong>Example transformation</strong>:</p>
<pre><code class="language-harneet">Input tokens:  [VAR, IDENT(&quot;x&quot;), INT, ASSIGN, INTEGER(42)]
Output AST:    VarStatement { name: &quot;x&quot;, type: &quot;int&quot;, value: 42 }
</code></pre>
<p><strong>Key functions</strong>:
- <code>parseStatement()</code> - Parses different statement types
- <code>parseExpression()</code> - Handles expressions with precedence
- Prefix and infix parsing functions for different operators</p>
<h2 id="3-abstract-syntax-tree-ast-astgo">3. Abstract Syntax Tree (AST) - <code>ast.go</code></h2>
<h3 id="what-are-ast-trees">What are AST trees?</h3>
<p>An Abstract Syntax Tree (AST) is a tree-like data structure that represents the hierarchical structure of your program. Each node in the tree represents a construct in your programming language (like a statement, expression, or operator).</p>
<h3 id="why-do-we-need-ast-trees">Why do we need AST trees?</h3>
<ol>
<li>
<p><strong>Structure</strong>: ASTs provide a clean, organized way to represent the structure of your code, removing unnecessary details like whitespace and focusing on meaning.</p>
</li>
<li>
<p><strong>Language Independence</strong>: Once you have an AST, you can process it without worrying about the original syntax - you can evaluate it, compile it, or transform it.</p>
</li>
<li>
<p><strong>Hierarchical Relationships</strong>: ASTs naturally represent the precedence and grouping in your code. For example, in <code>2 + 3 * 4</code>, the AST shows that multiplication happens before addition.</p>
</li>
<li>
<p><strong>Easy Processing</strong>: Tree structures are easy to traverse recursively, making interpretation and compilation straightforward.</p>
</li>
</ol>
<p><strong>Example AST structure</strong>:</p>
<pre><code>Program
├── VarStatement
│   ├── name: &quot;x&quot;
│   ├── type: &quot;int&quot;
│   └── value: IntegerLiteral(42)
└── AssignStatement
    ├── name: &quot;x&quot;
    └── value: InfixExpression
        ├── left: Identifier(&quot;x&quot;)
        ├── operator: &quot;+&quot;
        └── right: IntegerLiteral(10)
</code></pre>
<p><strong>Key node types</strong>:
- <strong>Statements</strong>: <code>VarStatement</code>, <code>AssignStatement</code>, <code>IfStatement</code>, <code>ForStatement</code>, <code>ImportStatement</code>
- <strong>Expressions</strong>: <code>Identifier</code>, <code>IntegerLiteral</code>, <code>StringLiteral</code>, <code>InfixExpression</code>, <code>PrefixExpression</code>, <code>CallExpression</code>
- <strong>Program</strong>: Root node containing all statements</p>
<h2 id="4-evaluator-evaluatorgo">4. Evaluator (<code>evaluator.go</code>)</h2>
<p><strong>What it does</strong>: The evaluator is a tree-walking interpreter that traverses the AST and executes the program by evaluating each node.</p>
<p><strong>Key responsibilities</strong>:
- Walks through the AST recursively
- Maintains program state (variables, their values, imported modules)
- Executes operations (arithmetic, comparisons, assignments)
- Manages scoping through environments with module support
- Handles control flow (if statements, loops)
- Processes import statements and resolves standard library functions
- Returns results or error objects</p>
<p><strong>Key functions</strong>:
- <code>Eval(Node, *Environment)</code> - Main evaluation function
- <code>evalStatement()</code> - Evaluates different statement types
- <code>evalExpression()</code> - Evaluates expressions and returns values
- Environment management for variable scoping and module imports
- Object type conversion between evaluator and standard library systems</p>
<h2 id="5-standard-library-stdlibgo">5. Standard Library (<code>stdlib.go</code>)</h2>
<p><strong>What it does</strong>: The standard library provides a collection of built-in modules and functions that extend the language's capabilities without requiring external dependencies.</p>
<p><strong>Key responsibilities</strong>:
- Provides modular functionality through importable modules
- Implements commonly needed functions (printing, math, string operations)
- Maintains type safety through object conversion
- Integrates seamlessly with the evaluator via the environment system</p>
<p><strong>Available modules</strong>:
- <strong>fmt</strong>: Formatting and printing functions (<code>Println</code>, <code>Print</code>, <code>Printf</code>)
- <strong>math</strong>: Mathematical operations (<code>Abs</code>, <code>Max</code>, <code>Min</code>, <code>Pow</code>)
- <strong>strings</strong>: String manipulation (<code>Len</code>, <code>Upper</code>, <code>Lower</code>, <code>Contains</code>, <code>Replace</code>, <code>Split</code>, <code>ToInt</code>)
- <strong>datetime</strong>: Date, time, and timezone operations with Go-style timers and tickers
- <strong>os</strong>: Operating system integration and device management
- <strong>path</strong>: File path manipulation and utilities
- <strong>file</strong>: File system operations and I/O
- <strong>log</strong>: Structured logging with multiple levels</p>
<p><strong>Architecture features</strong>:
- <strong>Modular Design</strong>: Each module is self-contained with its own namespace
- <strong>Type Conversion</strong>: Automatic conversion between evaluator and stdlib object types
- <strong>Extensible</strong>: Easy to add new modules and functions
- <strong>Import System</strong>: Functions only available after importing the containing module</p>
<p><strong>Key functions</strong>:
- <code>GetModule(name)</code> - Retrieves a module by name
- Module function registration and execution
- Object type conversion (<code>evalToStdlib</code>, <code>stdlibToEval</code>)
- Built-in function wrappers for seamless integration</p>
<h2 id="6-stack-trace-system-error-debugging">6. Stack Trace System (Error Debugging)</h2>
<p><strong>What it does</strong>: The stack trace system provides comprehensive error debugging information, including precise source locations and function call hierarchies, making it much easier to diagnose and fix runtime errors.</p>
<p><strong>Key responsibilities</strong>:
- <strong>Position Tracking</strong>: All AST nodes maintain their exact source position (file, line, column)
- <strong>Call Stack Management</strong>: Environment tracks the complete function call hierarchy
- <strong>Error Enhancement</strong>: Runtime errors include detailed stack trace information
- <strong>Source Context</strong>: File names and positions are preserved throughout execution</p>
<h3 id="architecture-components">Architecture Components</h3>
<h4 id="a-position-information-parserastgo">A. Position Information (<code>parser/ast.go</code>)</h4>
<p>Every AST node includes a <code>Position</code> struct:</p>
<pre><code class="language-go">type Position struct {
    Line     int    // Line number in source file
    Column   int    // Column position on the line  
    Filename string // Source file path
}

type Node interface {
    String() string
    Pos() Position  // All nodes provide their position
}
</code></pre>
<h4 id="b-stack-frame-tracking-evaluatorgo">B. Stack Frame Tracking (<code>evaluator.go</code>)</h4>
<p>The evaluator maintains a call stack using <code>StackFrame</code> structures:</p>
<pre><code class="language-go">type StackFrame struct {
    Function string          // Function name (&quot;&lt;program&gt;&quot; for top-level)
    Position parser.Position // Exact source location
    Source   string          // Source code context (future enhancement)
}
</code></pre>
<h4 id="c-enhanced-error-objects">C. Enhanced Error Objects</h4>
<p>Error objects include complete stack trace information:</p>
<pre><code class="language-go">type Error struct {
    Message    string       // The actual error message
    StackTrace []StackFrame // Complete call stack at error time
}
</code></pre>
<h4 id="d-environment-call-stack-management">D. Environment Call Stack Management</h4>
<p>The <code>Environment</code> maintains the active call stack:</p>
<pre><code class="language-go">type Environment struct {
    store     map[string]Object
    modules   map[string]*stdlib.Module
    outer     *Environment
    callStack []StackFrame          // Tracks function calls
}
</code></pre>
<h3 id="implementation-flow">Implementation Flow</h3>
<h4 id="step-1-position-tracking-during-parsing">Step 1: Position Tracking During Parsing</h4>
<ol>
<li><strong>Lexer Enhancement</strong>: Tokens include filename, line, and column information</li>
<li><strong>Parser Enhancement</strong>: All AST node creation includes position from tokens</li>
<li><strong>Helper Function</strong>: <code>posFromToken()</code> converts token position to AST position</li>
</ol>
<h4 id="step-2-call-stack-management-during-evaluation">Step 2: Call Stack Management During Evaluation</h4>
<ol>
<li><strong>Initial Frame</strong>: Environment starts with <code>&lt;program&gt;</code> frame</li>
<li><strong>Function Calls</strong>: <code>PushFrame()</code> adds new stack frame when calling functions</li>
<li><strong>Position Updates</strong>: Current frame position updated as evaluation progresses</li>
<li><strong>Frame Cleanup</strong>: <code>PopFrame()</code> removes frames when functions complete</li>
</ol>
<h4 id="step-3-error-creation-with-stack-traces">Step 3: Error Creation with Stack Traces</h4>
<ol>
<li><strong>Stack-Aware Errors</strong>: <code>newErrorWithStack()</code> captures current call stack</li>
<li><strong>Error Propagation</strong>: Errors bubble up maintaining their stack trace</li>
<li><strong>Formatted Output</strong>: Stack traces display with clear formatting</li>
</ol>
<h3 id="position-flow-example">Position Flow Example</h3>
<p><strong>Source Code</strong>: <code>examples/error.ha</code></p>
<pre><code class="language-harneet">import math
var result = math.Max(42, 10 / 0)  // Division by zero error
</code></pre>
<p><strong>Position Tracking Flow</strong>:</p>
<pre><code>1. Lexer: Creates tokens with filename &quot;examples/error.ha&quot;
2. Parser: AST nodes inherit position from tokens:
   - VarStatement at error.ha:2:0
   - CallExpression at error.ha:2:14  
   - InfixExpression (/) at error.ha:2:27
3. Evaluator: Updates call stack positions during execution:
   - &lt;program&gt; frame: error.ha:2:14 (when evaluating var statement)
   - math.Max frame: error.ha:2:33 (when calling function)
4. Error Creation: Division by zero creates error with both frames
</code></pre>
<p><strong>Output Stack Trace</strong>:</p>
<pre><code>ERROR: division by zero
Stack trace:
  at &lt;program&gt; (examples/error.ha:2:14)
  at math.Max (examples/error.ha:2:33)
</code></pre>
<h3 id="key-implementation-details">Key Implementation Details</h3>
<h4 id="a-filename-propagation">A. Filename Propagation</h4>
<ul>
<li><strong>Lexer</strong>: <code>NewWithFilename()</code> accepts filename parameter</li>
<li><strong>Token Creation</strong>: All tokens include source filename</li>
<li><strong>Environment</strong>: <code>SetProgramFilename()</code> ensures program frame has filename</li>
<li><strong>Position Preservation</strong>: Evaluation preserves filename across all frames</li>
</ul>
<h4 id="b-smart-position-updates">B. Smart Position Updates</h4>
<p>The evaluator intelligently updates positions:</p>
<pre><code class="language-go">if nodePos.Filename != &quot;&quot; {
    // Use complete position information
    env.callStack[top].Position = nodePos
} else {
    // Preserve filename, update line/column only
    env.callStack[top].Position.Line = nodePos.Line
    env.callStack[top].Position.Column = nodePos.Column
}
</code></pre>
<h4 id="c-function-call-tracking">C. Function Call Tracking</h4>
<p>Standard library function calls are tracked:</p>
<pre><code class="language-go">// Add function call to stack trace
env.PushFrame(functionName, node.Pos())
defer env.PopFrame()

// Execute function with tracked context
result := builtin.Fn(args...)
</code></pre>
<h3 id="error-types-with-stack-traces">Error Types with Stack Traces</h3>
<h4 id="1-arithmetic-errors">1. Arithmetic Errors</h4>
<ul>
<li><strong>Division by Zero</strong>: Shows exact location of division operation</li>
<li><strong>Modulo by Zero</strong>: Includes stack context for debugging</li>
</ul>
<h4 id="2-identifier-errors">2. Identifier Errors</h4>
<ul>
<li><strong>Undefined Variables</strong>: Shows where undefined identifier was accessed</li>
<li><strong>Scope Issues</strong>: Stack trace helps identify scoping problems</li>
</ul>
<h4 id="3-function-call-errors">3. Function Call Errors</h4>
<ul>
<li><strong>Invalid Arguments</strong>: Shows both call site and function entry</li>
<li><strong>Nested Calls</strong>: Complete call hierarchy for complex expressions</li>
</ul>
<h4 id="4-type-conversion-errors">4. Type Conversion Errors</h4>
<ul>
<li><strong>String to Int</strong>: Standard library calls show full context</li>
<li><strong>Module Errors</strong>: Import and function resolution issues</li>
</ul>
<h4 id="5-parser-errors-syntax-errors">5. Parser Errors (Syntax Errors)</h4>
<ul>
<li><strong>Incomplete Expressions</strong>: Shows "monkey business" message with stack trace information</li>
<li><strong>Invalid Syntax</strong>: Token parsing errors include detailed diagnostic information</li>
<li><strong>Grammar Violations</strong>: Comprehensive error reporting during compilation phase</li>
</ul>
<h3 id="benefits-for-debugging">Benefits for Debugging</h3>
<h4 id="immediate-error-location">Immediate Error Location</h4>
<pre><code>Before: &quot;ERROR: division by zero&quot;
After:  &quot;ERROR: division by zero
         Stack trace:
           at &lt;program&gt; (myfile.ha:5:22)&quot;
</code></pre>
<h4 id="function-call-context">Function Call Context</h4>
<pre><code>Before: Hard to trace nested function calls
After:  Shows complete call hierarchy:
        at &lt;program&gt; (myfile.ha:5:14)
        at math.Max (myfile.ha:5:33)
</code></pre>
<h4 id="file-context">File Context</h4>
<pre><code>Before: No way to know which file caused error
After:  Exact file path in every stack frame
</code></pre>
<h4 id="parser-error-diagnostics">Parser Error Diagnostics</h4>
<pre><code>Before: Basic syntax error messages
After:  &quot;Woops! Sincere apologies, but we ran into some errors while running the program!
         Stack trace:
          parser errors:
            no prefix parse function for DIVIDE found
            no prefix parse function for ERROR_TYPE found&quot;
</code></pre>
<h3 id="testing-infrastructure">Testing Infrastructure</h3>
<h4 id="test-files">Test Files</h4>
<ul>
<li><code>examples/simple_stack_trace_test.ha</code> - Basic error scenarios</li>
<li><code>examples/nested_function_error_test.ha</code> - Function call hierarchies  </li>
<li><code>examples/identifier_error_test.ha</code> - Variable access errors</li>
<li><code>examples/stacktrace_test.ha</code> - Comprehensive error testing</li>
<li><code>examples/parser_error_test.ha</code> - Parser error diagnostic testing</li>
</ul>
<h4 id="test-commands">Test Commands</h4>
<ul>
<li><code>just test-stacktrace</code> - Dedicated stack trace testing</li>
<li><code>just test</code> - Includes stack trace tests in full suite</li>
</ul>
<h4 id="test-output-validation">Test Output Validation</h4>
<p>Tests verify that stack traces include:
- Correct file names and paths
- Accurate line and column numbers
- Complete function call hierarchies
- Proper error message formatting</p>
<h2 id="control-flow-between-components">Control Flow Between Components</h2>
<p>Here's how the components work together when you run a Harneet program:</p>
<h3 id="step-1-lexical-analysis">Step 1: Lexical Analysis</h3>
<pre><code class="language-harneet">Source: &quot;import fmt\nvar x int = 42\nfmt.Println(x + 8)&quot;
↓ (Lexer processes character by character)
Tokens: [IMPORT, IDENT(&quot;fmt&quot;), NEWLINE, VAR, IDENT(&quot;x&quot;), INT, ASSIGN, INTEGER(42), NEWLINE, IDENT(&quot;fmt&quot;), DOT, IDENT(&quot;Println&quot;), LPAREN, IDENT(&quot;x&quot;), PLUS, INTEGER(8), RPAREN]
</code></pre>
<h3 id="step-2-syntax-analysis">Step 2: Syntax Analysis</h3>
<pre><code class="language-harneet">Tokens → Parser
↓ (Parser applies grammar rules)
AST: Program {
  statements: [
    ImportStatement { module: Identifier(&quot;fmt&quot;) },
    VarStatement { name: &quot;x&quot;, type: &quot;int&quot;, value: IntegerLiteral(42) },
    ExpressionStatement { 
      expression: CallExpression {
        function: InfixExpression { left: Identifier(&quot;fmt&quot;), operator: &quot;.&quot;, right: Identifier(&quot;Println&quot;) },
        arguments: [
          InfixExpression { left: Identifier(&quot;x&quot;), operator: &quot;+&quot;, right: IntegerLiteral(8) }
        ]
      }
    }
  ]
}
</code></pre>
<h3 id="step-3-evaluation">Step 3: Evaluation</h3>
<pre><code class="language-harneet">AST → Evaluator (with Standard Library support)
↓ (Evaluator walks the tree)
1. Execute ImportStatement: Import fmt module from standard library
2. Execute VarStatement: Create variable &quot;x&quot; with value 42
3. Execute CallExpression:
   - Resolve &quot;fmt.Println&quot; to standard library function
   - Evaluate argument: x + 8 = 42 + 8 = 50
   - Convert evaluator objects to stdlib objects
   - Call fmt.Println(50) from standard library
   - Convert result back to evaluator objects
   - Output: &quot;50&quot;
</code></pre>
<h2 id="data-flow-summary">Data Flow Summary</h2>
<ol>
<li><strong>Lexer</strong>: Raw text → Tokens (with position information)</li>
<li><strong>Parser</strong>: Tokens → AST (structured representation with source positions)</li>
<li><strong>Evaluator</strong>: AST → Execution (with side effects like printing, variable changes)</li>
<li><strong>Standard Library</strong>: Provides modular built-in functionality through import system</li>
<li><strong>Stack Trace System</strong>: Tracks execution context and provides detailed error information</li>
</ol>
<p>Each component has a single responsibility and passes its output to the next stage, creating a clean separation of concerns that makes the interpreter easier to understand, debug, and extend. The stack trace system operates as a cross-cutting concern, enhancing error reporting throughout the pipeline.</p>
<h2 id="module-import-and-resolution-flow">Module Import and Resolution Flow</h2>
<p>When a program uses <code>import fmt</code> and calls <code>fmt.Println()</code>:</p>
<ol>
<li><strong>Import Processing</strong>: ImportStatement node causes evaluator to load fmt module into environment</li>
<li><strong>Function Resolution</strong>: CallExpression with dot notation resolves to standard library function</li>
<li><strong>Type Conversion</strong>: Arguments converted from evaluator objects to stdlib objects</li>
<li><strong>Function Execution</strong>: Standard library function executes with converted arguments</li>
<li><strong>Result Conversion</strong>: Function result converted back to evaluator object system</li>
</ol>
<h2 id="environment-and-scoping">Environment and Scoping</h2>
<p>The evaluator uses an <code>Environment</code> struct to manage variable scoping and module imports:
- Each scope (global, function, block) has its own environment
- Environments can be nested (inner scopes can access outer variables)
- Variable lookup searches from innermost to outermost scope
- Module registry tracks imported modules and their available functions
- Import statements load modules into the current environment's module registry
- Function calls with dot notation resolve through the module system</p>
<p>This architecture makes it relatively straightforward to add new language features by:
1. Adding new token types to the lexer
2. Adding parsing rules to the parser
3. Adding new AST node types
4. Adding evaluation logic to the evaluator
5. Extending the standard library with new modules and functions (for built-in functionality)</p>
<h2 id="adding-new-standard-library-modules">Adding New Standard Library Modules</h2>
<p>The modular standard library design makes it easy to add new functionality:</p>
<h3 id="step-1-define-module-functions">Step 1: Define Module Functions</h3>
<pre><code class="language-go">func newModule() *Module {
    return &amp;Module{
        Name: &quot;modulename&quot;,
        Functions: map[string]*BuiltinFunction{
            &quot;FunctionName&quot;: {
                Name: &quot;FunctionName&quot;,
                Fn: func(args ...Object) Object {
                    // Implementation here
                    return result
                },
            },
        },
    }
}
</code></pre>
<h3 id="step-2-register-module">Step 2: Register Module</h3>
<pre><code class="language-go">var Modules = map[string]*Module{
    &quot;fmt&quot;:        fmtModule(),
    &quot;math&quot;:       mathModule(), 
    &quot;strings&quot;:    stringsModule(),
    &quot;modulename&quot;: newModule(),  // Add new module
}
</code></pre>
<h3 id="step-3-use-in-harneet-code">Step 3: Use in Harneet Code</h3>
<pre><code class="language-harneet">import modulename
var result = modulename.FunctionName(args)
</code></pre>
<p>This design provides:
- <strong>Type Safety</strong>: Automatic object conversion between systems
- <strong>Namespace Isolation</strong>: Each module has its own function namespace
- <strong>Easy Testing</strong>: Modules can be tested independently
- <strong>Clean Integration</strong>: No changes needed to core interpreter components</p>
<h2 id="advanced-standard-library-architecture">Advanced Standard Library Architecture</h2>
<h3 id="complex-object-types-and-state-management">Complex Object Types and State Management</h3>
<p>The Harneet interpreter supports advanced object types beyond basic primitives, enabling sophisticated functionality like Go-style timers and tickers. These complex objects require special handling for state management and resource cleanup.</p>
<h4 id="timer-and-ticker-object-architecture">Timer and Ticker Object Architecture</h4>
<p><strong>Object Type System Extension</strong>:</p>
<pre><code class="language-go">// Standard Library Object Types
const (
    INTEGER_OBJ   = &quot;INTEGER&quot;
    STRING_OBJ    = &quot;STRING&quot; 
    BOOLEAN_OBJ   = &quot;BOOLEAN&quot;
    TICKER_OBJ    = &quot;TICKER&quot;    // Go-style periodic events
    TIMER_OBJ     = &quot;TIMER&quot;     // Go-style delayed events
)
</code></pre>
<p><strong>Complex Object Implementations</strong>:</p>
<pre><code class="language-go">type Ticker struct {
    ID         string
    Interval   int64
    C          chan time.Time
    ticker     *time.Ticker
}

type Timer struct {
    ID      string
    Delay   int64
    C       chan time.Time
    timer   *time.Timer
    fired   bool
}
</code></pre>
<h4 id="global-state-management">Global State Management</h4>
<p><strong>Resource Tracking</strong>:
The standard library maintains global state for managing active timers and tickers:</p>
<pre><code class="language-go">var (
    activeTickers = make(map[string]*Ticker)
    activeTimers  = make(map[string]*Timer)
    mu            sync.Mutex  // Thread safety for resource access
)
</code></pre>
<p><strong>Resource Lifecycle Management</strong>:
1. <strong>Creation</strong>: Objects stored in global maps with unique string IDs
2. <strong>Access</strong>: Non-blocking channel operations for event checking
3. <strong>Cleanup</strong>: Explicit resource cleanup with Stop functions
4. <strong>Memory Safety</strong>: Automatic cleanup prevents resource leaks</p>
<h4 id="cross-system-object-conversion">Cross-System Object Conversion</h4>
<p><strong>Evaluator-to-Standard Library Conversion</strong>:</p>
<pre><code class="language-go">func evalToStdlib(obj evaluator.Object) Object {
    switch o := obj.(type) {
    case *evaluator.Ticker:
        return &amp;Ticker{
            ID:       o.ID,
            Interval: o.Interval,
        }
    case *evaluator.Timer:
        return &amp;Timer{
            ID:    o.ID,
            Delay: o.Delay,
            fired: o.fired,
        }
    }
}
</code></pre>
<p><strong>Standard Library-to-Evaluator Conversion</strong>:</p>
<pre><code class="language-go">func stdlibToEval(obj Object) evaluator.Object {
    switch o := obj.(type) {
    case *Ticker:
        return &amp;evaluator.Ticker{
            ID:       o.ID,
            Interval: o.Interval,
        }
    case *Timer:
        return &amp;evaluator.Timer{
            ID:    o.ID,
            Delay: o.Delay,
            fired: o.fired,
        }
    }
}
</code></pre>
<h3 id="timezone-and-locale-management">Timezone and Locale Management</h3>
<p><strong>International Support Architecture</strong>:</p>
<pre><code class="language-go">var localeToTZ = map[string]string{
    &quot;US&quot;: &quot;America/New_York&quot;,    &quot;UK&quot;: &quot;Europe/London&quot;,
    &quot;DE&quot;: &quot;Europe/Berlin&quot;,       &quot;FR&quot;: &quot;Europe/Paris&quot;,
    &quot;JP&quot;: &quot;Asia/Tokyo&quot;,          &quot;AU&quot;: &quot;Australia/Sydney&quot;,
    &quot;IN&quot;: &quot;Asia/Kolkata&quot;,        &quot;CN&quot;: &quot;Asia/Shanghai&quot;,
    &quot;BR&quot;: &quot;America/Sao_Paulo&quot;,   &quot;CA&quot;: &quot;America/Toronto&quot;,
    &quot;RU&quot;: &quot;Europe/Moscow&quot;,       &quot;MX&quot;: &quot;America/Mexico_City&quot;,
}
</code></pre>
<p><strong>Cross-Platform Timezone Operations</strong>:
- <strong>IANA Database Integration</strong>: Uses Go's time.LoadLocation for standard timezone support
- <strong>System Timezone Detection</strong>: Automatic detection of current system timezone
- <strong>Offset Calculations</strong>: UTC offset computation for any timezone
- <strong>Locale Mapping</strong>: Country-code to timezone resolution</p>
<h3 id="error-handling-integration">Error Handling Integration</h3>
<p><strong>Go-Style Error Handling with Standard Library</strong>:
All standard library functions return <code>(result, error)</code> tuples:</p>
<pre><code class="language-go">func ToInt(args ...Object) Object {
    if len(args) != 1 {
        return NewTuple(nil, NewError(&quot;ToInt() takes exactly 1 argument&quot;))
    }

    str, ok := args[0].(*String)
    if !ok {
        return NewTuple(nil, NewError(&quot;ToInt() argument must be a string&quot;))
    }

    value, err := strconv.Atoi(str.Value)
    if err != nil {
        return NewTuple(nil, NewError(fmt.Sprintf(&quot;cannot convert '%s' to int&quot;, str.Value)))
    }

    return NewTuple(NewInteger(int64(value)), nil)
}
</code></pre>
<p><strong>Stack Trace Integration</strong>:
Standard library errors include complete call stack information:</p>
<pre><code class="language-go">func (env *Environment) CallBuiltin(name string, node parser.Node, args ...Object) Object {
    env.PushFrame(name, node.Pos())
    defer env.PopFrame()

    result := builtin.Fn(args...)

    if errorObj, ok := result.(*Error); ok {
        errorObj.StackTrace = env.GetCallStack()
    }

    return result
}
</code></pre>
<h3 id="module-registration-and-discovery">Module Registration and Discovery</h3>
<p><strong>Dynamic Module System</strong>:</p>
<pre><code class="language-go">var Modules = map[string]*Module{
    &quot;fmt&quot;:      fmtModule(),
    &quot;math&quot;:     mathModule(),
    &quot;strings&quot;:  stringsModule(),
    &quot;datetime&quot;: datetimeModule(),
    &quot;os&quot;:       osModule(),
    &quot;path&quot;:     pathModule(),
    &quot;file&quot;:     fileModule(),
    &quot;log&quot;:      logModule(),
}

func GetModule(name string) (*Module, bool) {
    module, exists := Modules[name]
    return module, exists
}
</code></pre>
<p><strong>Extensible Function Registration</strong>:</p>
<pre><code class="language-go">func datetimeModule() *Module {
    return &amp;Module{
        Name: &quot;datetime&quot;,
        Functions: map[string]*BuiltinFunction{
            &quot;Now&quot;:        {Name: &quot;Now&quot;, Fn: datetimeNow},
            &quot;ConvertTZ&quot;:  {Name: &quot;ConvertTZ&quot;, Fn: datetimeConvertTZ},
            &quot;NewTimer&quot;:   {Name: &quot;NewTimer&quot;, Fn: datetimeNewTimer},
            &quot;NewTicker&quot;:  {Name: &quot;NewTicker&quot;, Fn: datetimeNewTicker},
            // ... additional functions
        },
    }
}
</code></pre>
<h3 id="testing-infrastructure-for-complex-objects">Testing Infrastructure for Complex Objects</h3>
<p><strong>Comprehensive Test Coverage</strong>:
- Timer functionality: Creation, checking, firing, stopping
- Ticker functionality: Periodic events, cleanup
- Timezone operations: Conversion, locale resolution
- Error handling: Invalid arguments, resource management</p>
<p><strong>Test File Organization</strong>:</p>
<pre><code>examples/
├── datetime_comprehensive_test.ha  # Full feature coverage
├── datetime_timer_test.ha          # Timer-specific testing  
├── datetime_ticker_test.ha         # Ticker-specific testing
├── datetime_timezone_test.ha       # Timezone operations
└── os_comprehensive_test.ha        # OS module functionality
</code></pre>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>